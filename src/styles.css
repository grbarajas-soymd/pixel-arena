*{margin:0;padding:0;box-sizing:border-box;image-rendering:pixelated}
:root{
  --parch:#d4c4a0;--parch2:#c4b48a;--parch-dk:#8a7a5a;--ink:#3a2a1a;
  --steel:#4a5a6a;--teal:#2a8a7a;--teal-glow:#44ddbb;
  --fire:#dd6622;--fire-glow:#ffaa44;--lava:#cc3300;
  --ice:#3388cc;--ice-glow:#66ccff;--frost:#88ddff;
  --panel:rgba(60,45,30,0.92);--panel-border:#6a5a3a;
  --gold:#c8a832;--gold-bright:#e8d060;
  --blood:#aa2200;--heal:#44aa44;--poison:#66aa22;
  --shadow:#443366;--shadow-glow:#8866cc;
}
body{background:#000000;color:var(--ink);font-family:'Nunito',sans-serif;min-height:100vh;overflow-x:hidden;-webkit-font-smoothing:antialiased;font-weight:600}
.bg{position:fixed;inset:0;z-index:0;background:
  repeating-linear-gradient(0deg,transparent,transparent 3px,rgba(0,0,0,0.03) 3px,rgba(0,0,0,0.03) 4px),
  radial-gradient(ellipse at 50% 30%,#111111 0%,#000000 70%);
}
.app{position:relative;z-index:1;max-width:1300px;margin:0 auto;padding:10px}
.title{
  font-family:'Chakra Petch',sans-serif;text-align:center;font-size:1.6rem;
  color:var(--gold-bright);text-shadow:2px 2px 0 #4a3a10,0 0 20px rgba(200,168,50,0.3);
  letter-spacing:2px;margin-bottom:2px;
  animation:titleGlow 3s ease-in-out infinite alternate;
}
@keyframes titleGlow{0%{text-shadow:2px 2px 0 #4a3a10,0 0 10px rgba(200,168,50,0.2)}100%{text-shadow:2px 2px 0 #4a3a10,0 0 25px rgba(200,168,50,0.5)}}
.sub{text-align:center;font-size:.65rem;letter-spacing:4px;color:var(--parch-dk);margin-bottom:10px;text-transform:uppercase}

/* ===== SELECTOR ===== */
#selectorScreen{display:flex;flex-direction:column;align-items:center;gap:14px;padding:16px 0}
.sel-title{font-family:'Chakra Petch',sans-serif;font-size:.8rem;color:var(--gold);letter-spacing:1px;text-shadow:1px 1px 0 #2a1a00}
.sel-row{display:flex;gap:12px;align-items:center;flex-wrap:wrap;justify-content:center}
.class-card{
  width:155px;padding:14px 10px;border-radius:4px;
  border:3px solid var(--parch-dk);background:var(--panel);cursor:pointer;
  transition:all .15s;text-align:center;position:relative;
  box-shadow:inset 0 0 30px rgba(0,0,0,0.3),2px 2px 0 rgba(0,0,0,0.4);
}
.class-card:hover{border-color:var(--gold);transform:translateY(-2px);box-shadow:inset 0 0 30px rgba(0,0,0,0.3),2px 2px 0 rgba(0,0,0,0.4),0 0 12px rgba(200,168,50,0.2)}
.class-card.selected{border-color:var(--gold-bright);box-shadow:inset 0 0 30px rgba(0,0,0,0.2),0 0 20px rgba(200,168,50,0.3)}
.class-card::before{content:'';position:absolute;top:0;left:0;right:0;height:3px}
.class-card.wiz::before{background:var(--teal)}.class-card.rgr::before{background:var(--fire)}.class-card.asn::before{background:var(--ice)}
.class-card.bar::before{background:#cc4444}
.cc-icon{font-size:2.2rem;margin-bottom:6px;filter:drop-shadow(0 2px 4px rgba(0,0,0,0.5))}
.cc-name{font-family:'Chakra Petch',sans-serif;font-size:.65rem;font-weight:700;margin-bottom:4px;line-height:1.4}
.cc-name.wiz{color:var(--teal-glow)}.cc-name.rgr{color:var(--fire-glow)}.cc-name.asn{color:var(--ice-glow)}.cc-name.bar{color:#ff6666}
.cc-stats{font-size:.8rem;color:var(--parch);line-height:1.7;opacity:.8}
.go-btn{
  font-family:'Chakra Petch',sans-serif;font-size:.95rem;letter-spacing:2px;
  padding:14px 40px;border-radius:4px;
  border:3px solid var(--gold);color:var(--parch);
  background:linear-gradient(180deg,#5a4a20 0%,#3a2a10 100%);
  cursor:pointer;transition:all .15s;
  box-shadow:2px 2px 0 rgba(0,0,0,0.5),inset 0 1px 0 rgba(255,255,200,0.15);
  text-shadow:1px 1px 0 #1a1000;margin-top:8px;
}
.go-btn:hover{background:linear-gradient(180deg,#6a5a28 0%,#4a3a18 100%);box-shadow:2px 2px 0 rgba(0,0,0,0.5),0 0 15px rgba(200,168,50,0.3)}

/* ===== BATTLE ===== */
#battleScreen{display:none}
#arenaCanvas{display:block;width:100%;border-radius:4px;border:3px solid var(--parch-dk);box-shadow:inset 0 0 40px rgba(0,0,0,0.3),3px 3px 0 rgba(0,0,0,0.4)}
.hud{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:6px}
.hud-panel{
  background:var(--panel);border-radius:4px;padding:10px;
  border:2px solid var(--panel-border);
  box-shadow:inset 0 0 20px rgba(0,0,0,0.2),2px 2px 0 rgba(0,0,0,0.3);
  position:relative;overflow:hidden;
}
.hud-panel::before{content:'';position:absolute;top:0;left:0;right:0;height:2px}
.hud-panel.p1::before{background:linear-gradient(90deg,var(--teal-glow),transparent)}
.hud-panel.p2::before{background:linear-gradient(-90deg,var(--fire-glow),transparent)}
.hud-name{font-family:'Chakra Petch',sans-serif;font-size:.65rem;margin-bottom:5px;line-height:1.4}
.bar{margin-bottom:3px}.bar-label{display:flex;justify-content:space-between;font-size:.58rem;color:var(--parch-dk);margin-bottom:1px}
.bar-track{height:10px;background:rgba(0,0,0,0.4);border:1px solid rgba(255,255,255,0.08);overflow:hidden}
.bar-fill{height:100%;transition:width .2s}
.bar-fill.hp-w{background:linear-gradient(90deg,#1a6a5a,var(--teal-glow))}.bar-fill.hp-r{background:linear-gradient(90deg,#8a3300,var(--fire-glow))}
.bar-fill.hp-a{background:linear-gradient(90deg,#1a5588,var(--ice-glow))}
.bar-fill.hp-b{background:linear-gradient(90deg,#6a1a1a,#ff6666)}.bar-fill.mana-bar{background:linear-gradient(90deg,#1a3a6a,#4488cc)}
.bar-fill.charge-bar{background:linear-gradient(90deg,#2a6a5a,var(--teal-glow))}
.bar-fill.energy-bar{background:linear-gradient(90deg,#5a4a10,var(--gold-bright))}
.bar-fill.combo-bar{background:linear-gradient(90deg,#3a2a6a,var(--shadow-glow))}
.bar-fill.bleed-bar{background:linear-gradient(90deg,#6a1a00,var(--blood))}
.buffs{display:flex;gap:2px;flex-wrap:wrap;min-height:16px;margin:3px 0}
.buff{
  padding:1px 4px;font-family:'Nunito',sans-serif;font-size:.55rem;font-weight:700;
  border:1px solid;animation:bp .2s;text-shadow:0 1px 0 rgba(0,0,0,0.5);
}
@keyframes bp{0%{transform:scale(0)}100%{transform:scale(1)}}
.buff.bleed-b{background:rgba(170,34,0,0.4);color:#ff6644;border-color:#662200}
.buff.bloodlust-b{background:rgba(200,0,0,0.3);color:#ff8866;border-color:#660000}
.buff.mark-b{background:rgba(200,168,50,0.3);color:var(--gold-bright);border-color:#6a5a20}
.buff.ult-b{background:rgba(100,60,180,0.3);color:#bb88ff;border-color:#442266}
.buff.slow-b{background:rgba(80,80,80,0.3);color:#aaa;border-color:#444}
.buff.wolf-b{background:rgba(100,60,140,0.3);color:#cc88ff;border-color:#442266}
.buff.shock-b{background:rgba(42,138,122,0.3);color:var(--teal-glow);border-color:#1a5a4a}
.buff.shield-b{background:rgba(60,120,160,0.3);color:var(--frost);border-color:#2a5a7a}
.buff.surge-b{background:rgba(100,80,180,0.3);color:#aa88ff;border-color:#3a2a6a}
.buff.storm-b{background:rgba(42,138,122,0.3);color:var(--teal-glow);border-color:#1a5a4a}
.buff.stealth-b{background:rgba(40,50,60,0.5);color:#8899aa;border-color:#2a3a4a}
.buff.stun-b{background:rgba(200,168,50,0.4);color:var(--gold-bright);border-color:#6a5a20}
.buff.marked-b{background:rgba(200,100,0,0.3);color:#ffaa44;border-color:#6a3a00}
.buff.combo-b{background:rgba(100,60,140,0.3);color:var(--shadow-glow);border-color:#3a2a5a}
.buff.poison-b{background:rgba(80,140,20,0.3);color:#88cc44;border-color:#2a4a0a}
.stat-row{display:flex;justify-content:space-between;font-size:.55rem;color:var(--parch-dk);padding:1px 0}
.stat-val{color:var(--parch);font-weight:700}
.spells-row{display:flex;gap:2px;flex-wrap:wrap;margin-top:3px}
.spell-chip{
  padding:2px 4px;font-size:.55rem;
  background:rgba(0,0,0,0.3);border:1px solid rgba(255,255,255,0.06);
  color:var(--parch-dk);transition:all .15s;
}
.spell-chip.ready{border-color:var(--gold);color:var(--gold-bright);background:rgba(200,168,50,0.1)}
.spell-chip.active-s{border-color:#aa66ff;color:#cc88ff;background:rgba(120,60,200,0.15)}
.spell-chip.used-s{opacity:.25}
.spell-cd{font-size:.52rem;color:var(--parch-dk)}

.log-wrap{background:var(--panel);border-radius:4px;padding:8px;border:2px solid var(--panel-border);box-shadow:inset 0 0 20px rgba(0,0,0,0.2),2px 2px 0 rgba(0,0,0,0.3);margin-bottom:6px}
.log-title{font-family:'Chakra Petch',sans-serif;font-size:.8rem;color:var(--gold);letter-spacing:1px;margin-bottom:4px;text-shadow:1px 1px 0 #1a1000}
.log-scroll{height:100px;overflow-y:auto;font-size:.58rem;line-height:1.5;scrollbar-width:thin;scrollbar-color:#5a4a2a transparent}
.log-scroll::-webkit-scrollbar{width:3px}.log-scroll::-webkit-scrollbar-thumb{background:#5a4a2a;border-radius:0}
.lt{color:var(--parch-dk);margin-right:3px}.l-dmg{color:#dd6644}.l-heal{color:#44aa66}.l-spell{color:var(--gold)}
.l-bleed{color:#cc3300}.l-miss{color:#777;font-style:italic}.l-death{color:#ff2200;font-weight:700}
.l-ult{color:#cc88ff;font-weight:700}.l-summon{color:#aa77dd}.l-shock{color:var(--teal-glow)}.l-stealth{color:#7788aa}.l-poison{color:#88aa44}.l-stun{color:var(--gold-bright)}

.ctrls{display:flex;gap:5px;justify-content:center;margin-bottom:6px;flex-wrap:wrap}
.btn{
  font-family:'Chakra Petch',sans-serif;font-size:.8rem;
  padding:8px 16px;cursor:pointer;transition:all .15s;
  border:2px solid;box-shadow:2px 2px 0 rgba(0,0,0,0.4);
}
.btn:active{transform:translate(1px,1px);box-shadow:1px 1px 0 rgba(0,0,0,0.4)}
.btn-go{color:var(--parch);background:linear-gradient(180deg,#5a4a20,#3a2a10);border-color:var(--gold)}
.btn-go:disabled{opacity:.4;cursor:default}
.btn-rst{color:var(--parch-dk);background:linear-gradient(180deg,#1a1a1a,#000000);border-color:var(--panel-border)}
.btn-spd{color:var(--parch-dk);background:linear-gradient(180deg,#1a1a1a,#000000);border-color:var(--panel-border);padding:8px 10px;font-size:.55rem}
.btn-spd.on{background:linear-gradient(180deg,#4a4030,#3a3020);border-color:var(--gold);color:var(--gold)}
.btn-back{color:var(--parch-dk);background:linear-gradient(180deg,#1a1a1a,#000000);border-color:var(--panel-border);font-size:.55rem;padding:8px 12px}
.win-banner{
  display:none;text-align:center;padding:12px;margin-bottom:6px;
  font-family:'Chakra Petch',sans-serif;font-size:1.1rem;
  border:3px solid;box-shadow:2px 2px 0 rgba(0,0,0,0.4);
}
.win-banner.show{display:block;animation:winP 2s infinite}
@keyframes winP{0%,100%{box-shadow:2px 2px 0 rgba(0,0,0,0.4),0 0 10px rgba(200,168,50,0.1)}50%{box-shadow:2px 2px 0 rgba(0,0,0,0.4),0 0 25px rgba(200,168,50,0.3)}}
/* ===== MOBILE RESPONSIVE ===== */
@media(max-width:768px){
  .hud{grid-template-columns:1fr}
  .sel-row{flex-direction:column;align-items:center}
  .title{font-size:.9rem}
  .class-card{width:120px;padding:10px 6px}
  .cc-icon{font-size:1.6rem}
  .cc-name{font-size:.55rem}
  .cc-stats{font-size:.65rem}
  .cs-layout{grid-template-columns:1fr;max-width:400px}
  #arenaCanvas{width:100%;height:auto}
  .ctrls{flex-wrap:wrap;gap:3px}
  .btn{padding:6px 10px;font-size:.65rem}
  .btn-spd{padding:6px 8px;font-size:.5rem}
  .go-btn{font-size:.75rem;padding:10px 24px}
  .stake-section{max-width:100%;padding:8px}
  .follower-card{width:110px;padding:6px 4px}
  .log-scroll{height:70px}
  .dg-main{grid-template-columns:1fr;max-width:400px}
  .ld-next-preview{max-width:100%}
}
@media(max-width:480px){
  .title{font-size:.75rem;letter-spacing:1px}
  .sub{font-size:.5rem;letter-spacing:2px}
  .class-card{width:100px;padding:8px 4px}
  .cc-icon{font-size:1.3rem;margin-bottom:3px}
  .cc-name{font-size:.48rem}
  .cc-stats{font-size:.55rem}
  .go-btn{font-size:.62rem;padding:8px 16px}
  .btn{padding:5px 8px;font-size:.55rem}
  .btn-spd{padding:5px 6px;font-size:.45rem}
  .mode-tab{font-size:.45rem;padding:6px 10px}
  .follower-card{width:90px;padding:5px 3px}
  .follower-card .fc-icon{font-size:1rem}
  .follower-card .fc-name{font-size:.42rem}
  .follower-card .fc-stats{font-size:.38rem}
  .dg-choice{font-size:.52rem;padding:8px 12px;min-width:80px}
  .hud-name{font-size:.55rem}
  .cs-header{font-size:.75rem}
}

/* CUSTOM CHARACTER SHEET */
#customScreen{display:none;flex-direction:column;align-items:center;gap:12px;padding:16px 0}
.cs-header{font-family:'Chakra Petch',sans-serif;font-size:.95rem;color:#ff88ff;text-shadow:2px 2px 0 #4a1a4a,0 0 15px rgba(200,80,200,0.3);letter-spacing:2px}
.cs-layout{display:grid;grid-template-columns:1fr 180px 1fr;gap:10px;width:100%;max-width:880px}
.cs-panel{background:var(--panel);border:2px solid var(--panel-border);border-radius:4px;padding:10px;box-shadow:inset 0 0 20px rgba(0,0,0,0.2),2px 2px 0 rgba(0,0,0,0.3)}
.cs-panel-title{font-family:'Chakra Petch',sans-serif;font-size:.55rem;color:var(--gold);letter-spacing:1px;margin-bottom:6px;text-align:center;border-bottom:1px solid var(--panel-border);padding-bottom:3px}
.cs-avatar{width:160px;height:180px;background:rgba(0,0,0,0.3);border:2px solid var(--panel-border);display:flex;align-items:center;justify-content:center}
.cs-name-input{width:100%;font-family:'Chakra Petch',sans-serif;font-size:.55rem;background:rgba(0,0,0,0.4);border:2px solid var(--panel-border);color:#ff88ff;padding:5px 6px;text-align:center;outline:none}
.cs-name-input:focus{border-color:#cc44cc}
.eq-slot{display:flex;align-items:center;gap:5px;padding:5px 6px;margin-bottom:3px;background:rgba(0,0,0,0.2);border:1px solid rgba(255,255,255,0.05);cursor:pointer;transition:all .15s}
.eq-slot:hover{background:rgba(200,80,200,0.1);border-color:#cc44cc}
.eq-slot-icon{font-size:.9rem;width:20px;text-align:center}.eq-slot-label{font-size:.52rem;color:var(--parch-dk);min-width:42px}.eq-slot-name{font-size:.52rem;color:#ff88ff;flex:1}.eq-slot-stats{font-size:.48rem;color:var(--parch);opacity:.7}
.stat-edit-row{display:flex;align-items:center;justify-content:space-between;padding:2px 0;border-bottom:1px solid rgba(255,255,255,0.03)}
.stat-edit-label{font-size:.52rem;color:var(--parch-dk);min-width:55px}
.stat-edit-val{width:58px;font-family:'Chakra Petch',sans-serif;font-size:.52rem;background:rgba(0,0,0,0.4);border:1px solid var(--panel-border);color:var(--gold-bright);padding:2px 4px;text-align:right;outline:none}
.stat-edit-val:focus{border-color:#cc44cc}
select.stat-edit-val{width:75px;font-size:.48rem;color:var(--gold-bright);background:rgba(0,0,0,0.4);border:1px solid var(--panel-border)}
.skill-pick{display:flex;align-items:center;gap:5px;padding:6px;margin-bottom:4px;background:rgba(0,0,0,0.2);border:2px solid rgba(255,255,255,0.05);cursor:pointer;transition:all .15s}
.skill-pick:hover{background:rgba(200,80,200,0.1);border-color:#cc44cc}
.skill-pick.active{border-color:#ff88ff;background:rgba(200,80,200,0.12)}
.skill-icon{font-size:.95rem}.skill-info{flex:1}.skill-name{font-family:'Chakra Petch',sans-serif;font-size:.5rem;color:var(--parch);line-height:1.5}.skill-desc{font-size:.48rem;color:var(--parch-dk)}.skill-source{font-size:.45rem;color:#cc44cc}
.dropdown-overlay{display:none;position:fixed;inset:0;z-index:100;background:rgba(0,0,0,0.7);align-items:center;justify-content:center}
.dropdown-overlay.show{display:flex}
.dropdown-panel{background:#000000;border:3px solid #cc44cc;max-width:460px;width:90%;max-height:80vh;overflow-y:auto;padding:14px;box-shadow:0 0 30px rgba(200,80,200,0.3);scrollbar-width:thin;scrollbar-color:#5a4a2a transparent}
.dd-title{font-family:'Chakra Petch',sans-serif;font-size:.8rem;color:#ff88ff;text-align:center;margin-bottom:8px}
.dd-item{display:flex;align-items:center;gap:6px;padding:6px;margin-bottom:3px;background:var(--panel);border:2px solid var(--panel-border);cursor:pointer;transition:all .15s}
.dd-item:hover{border-color:#cc44cc;background:rgba(200,80,200,0.1)}
.dd-item-icon{font-size:1rem;width:26px;text-align:center}.dd-item-info{flex:1}.dd-item-name{font-size:.37rem;color:var(--parch);font-weight:700}.dd-item-stats{font-size:.48rem;color:var(--parch-dk);line-height:1.4}
.dd-close{font-family:'Chakra Petch',sans-serif;font-size:.37rem;padding:6px 14px;border:2px solid var(--panel-border);background:var(--panel);color:var(--parch-dk);cursor:pointer;display:block;margin:8px auto 0}
.dd-close:hover{border-color:var(--gold);color:var(--gold)}
.class-card.cst::before{background:#cc44cc}
.cc-name.cst{color:#ff88ff}
.bar-fill.hp-c{background:linear-gradient(90deg,#6a1a6a,#ff88ff)}
.bar-fill.res-bar{background:linear-gradient(90deg,#4a1a5a,#ff88ff)}

/* ===== DUNGEON MODE ===== */
#dungeonScreen{display:none;flex-direction:column;align-items:center;gap:10px;padding:10px 0}
.dg-header{font-family:'Chakra Petch',sans-serif;font-size:.95rem;color:#44ee88;text-shadow:2px 2px 0 #0a3a1a,0 0 15px rgba(50,200,100,0.3);letter-spacing:2px}
.dg-sub{font-size:.65rem;color:var(--parch-dk);letter-spacing:2px;text-align:center}
.dg-main{display:grid;grid-template-columns:220px 1fr 220px;gap:10px;width:100%;max-width:950px}
@media(max-width:700px){.dg-main{grid-template-columns:1fr;max-width:400px}}
.dg-panel{background:var(--panel);border:2px solid var(--panel-border);border-radius:4px;padding:10px;box-shadow:inset 0 0 20px rgba(0,0,0,0.2),2px 2px 0 rgba(0,0,0,0.3)}
.dg-panel-title{font-family:'Chakra Petch',sans-serif;font-size:.55rem;color:var(--gold);letter-spacing:1px;margin-bottom:6px;text-align:center;border-bottom:1px solid var(--panel-border);padding-bottom:3px}
.dg-map{position:relative;min-height:400px;display:flex;flex-direction:column;align-items:center;overflow:hidden}
.dg-map canvas{border:2px solid var(--panel-border);background:#0a0a0a}
.dg-room{position:relative;display:flex;flex-direction:column;align-items:center;gap:6px;padding:10px}
.dg-room-title{font-family:'Chakra Petch',sans-serif;font-size:.95rem;color:#44ee88;text-shadow:1px 1px 0 #0a2a1a}
.dg-room-desc{font-size:.65rem;color:var(--parch);text-align:center;line-height:1.6;max-width:440px}
.dg-room-icon{font-size:2.5rem;filter:drop-shadow(0 3px 6px rgba(0,0,0,0.6));margin:4px 0}
.dg-choices{display:flex;gap:8px;flex-wrap:wrap;justify-content:center;margin-top:4px}
.dg-choice{
  font-family:'Chakra Petch',sans-serif;font-size:.62rem;padding:12px 20px;
  background:linear-gradient(180deg,#1a3a1a,#0a2a0a);border:2px solid #2a5a2a;
  color:#44ee88;cursor:pointer;transition:all .15s;min-width:110px;text-align:center;
  box-shadow:2px 2px 0 rgba(0,0,0,0.4);line-height:1.6;
}
.dg-choice:hover{border-color:#44ee88;box-shadow:2px 2px 0 rgba(0,0,0,0.4),0 0 10px rgba(50,200,100,0.2);transform:translateY(-1px)}
.dg-choice.danger{background:linear-gradient(180deg,#3a1a1a,#2a0a0a);border-color:#5a2a2a;color:#ff6644}
.dg-choice.danger:hover{border-color:#ff6644;box-shadow:2px 2px 0 rgba(0,0,0,0.4),0 0 10px rgba(200,50,50,0.2)}
.dg-choice.gold-c{background:linear-gradient(180deg,#3a3a1a,#2a2a0a);border-color:#5a5a2a;color:var(--gold-bright)}
.dg-choice.gold-c:hover{border-color:var(--gold-bright)}
.dg-choice:disabled{opacity:.4;cursor:default;transform:none}
.dg-hero-info{font-size:.52rem;color:var(--parch);line-height:1.7}
.dg-hero-info b{color:#44ee88}
.dg-hero-bar{margin:3px 0}
.dg-hero-bar .bar-track{height:8px}
.dg-loot-card{
  padding:8px;margin:4px 0;background:rgba(0,0,0,0.3);border:2px solid;
  display:flex;align-items:center;gap:8px;transition:all .15s;cursor:pointer;
}
.dg-loot-card:hover{transform:translateY(-1px)}
.dg-loot-card.common{border-color:#6a6a6a}.dg-loot-card.uncommon{border-color:#44aa44}.dg-loot-card.rare{border-color:#4488dd}.dg-loot-card.epic{border-color:#aa44dd}.dg-loot-card.legendary{border-color:#ffaa22}
.dg-loot-icon{font-size:1.6rem}.dg-loot-info{flex:1}.dg-loot-name{font-family:'Chakra Petch',sans-serif;font-size:.5rem}.dg-loot-desc{font-size:.48rem;color:var(--parch-dk);margin-top:2px}
.dg-loot-name.common{color:#aaa}.dg-loot-name.uncommon{color:#44ee44}.dg-loot-name.rare{color:#66aaff}.dg-loot-name.epic{color:#cc66ff}.dg-loot-name.legendary{color:#ffcc22}
.dg-floor-num{font-family:'Chakra Petch',sans-serif;font-size:.65rem;color:#44ee88;text-align:center;margin-bottom:4px}

/* Room map markers */
.rm-dot{width:18px;height:18px;border-radius:3px;font-size:.55rem;line-height:18px;text-align:center;border:1px solid rgba(255,255,255,0.1);background:rgba(0,0,0,0.3);color:var(--parch-dk);transition:all .2s}
.rm-dot.current{border-color:var(--gold-bright);box-shadow:0 0 6px rgba(200,168,50,0.4);color:var(--gold-bright)}
.rm-dot.cleared{background:rgba(68,238,136,0.2);border-color:#44ee88;color:#44ee88}
.rm-dot.boss{border-color:#ff4444}
.rm-dot.boss.cleared{background:rgba(255,68,68,0.2);color:#ff4444}
.rm-dot.floor-sep{width:2px;background:var(--panel-border);border:none;height:18px;border-radius:0}

/* Intermission screen */
.dg-intermission{text-align:center;padding:12px 8px}
.dg-im-title{font-family:'Chakra Petch',sans-serif;font-size:.85rem;margin-bottom:6px}
.dg-im-summary{font-size:.6rem;color:var(--parch);line-height:1.8;margin-bottom:8px}
.dg-im-stat{display:inline-block;padding:3px 10px;margin:2px;background:rgba(0,0,0,0.3);border-radius:3px;font-size:.55rem}
.dg-im-follower{
  margin:8px auto;padding:12px;max-width:280px;text-align:center;
  background:rgba(0,0,0,0.4);border-radius:6px;
}
.dg-im-follower .fim-icon{font-size:2.2rem;margin-bottom:4px}
.dg-im-follower .fim-name{font-family:'Chakra Petch',sans-serif;font-size:.65rem;margin-bottom:2px}
.dg-im-follower .fim-rarity{font-size:.48rem;text-transform:uppercase;letter-spacing:2px;margin-bottom:4px}
.dg-im-follower .fim-ability{font-size:.48rem;color:#88ccaa;margin:4px 0;line-height:1.5}
.dg-im-follower .fim-buff{font-size:.48rem;color:var(--gold-bright);margin:2px 0}
.dg-im-follower .fim-wager{font-size:.45rem;color:#cc8866;margin:2px 0}
.dg-im-follower.common{border:2px solid #aaa}.dg-im-follower.uncommon{border:2px solid #44ee44}
.dg-im-follower.rare{border:2px solid #66aaff;box-shadow:0 0 10px rgba(102,170,255,0.2)}
.dg-im-follower.epic{border:2px solid #cc66ff;box-shadow:0 0 15px rgba(204,102,255,0.3)}
.dg-im-follower.legendary{border:2px solid #ffcc22;box-shadow:0 0 20px rgba(255,204,34,0.4);animation:ldglow 1.5s ease-in-out infinite}
@keyframes ldglow{0%,100%{box-shadow:0 0 15px rgba(255,204,34,0.3)}50%{box-shadow:0 0 30px rgba(255,204,34,0.6)}}

/* Ladder intermission */
.ld-inter{text-align:center;padding:12px 0}
.ld-inter .ld-title{font-family:'Chakra Petch',sans-serif;font-size:.75rem;margin-bottom:8px}
.ld-inter .ld-bracket{display:flex;flex-wrap:wrap;gap:4px;justify-content:center;margin:8px 0}
.ld-inter .ld-opp{
  display:inline-flex;align-items:center;gap:4px;padding:4px 8px;
  background:rgba(0,0,0,0.3);border:1px solid rgba(255,255,255,0.1);font-size:.48rem;
  color:var(--parch-dk);border-radius:3px;
}
.ld-opp.won{border-color:#44ee88;color:#44ee88}
.ld-opp.lost{border-color:#ff4444;color:#ff4444}
.ld-opp.current{border-color:var(--gold-bright);color:var(--gold-bright);background:rgba(200,168,50,0.15)}
.ld-opp.upcoming{opacity:0.5}
.ld-opp .opp-icon{font-size:.7rem}
.ld-next-preview{
  margin:10px auto;padding:10px;max-width:320px;
  background:rgba(0,0,0,0.35);border:2px solid var(--fire-glow);border-radius:4px;
}
.ld-next-preview .lnp-title{font-family:'Chakra Petch',sans-serif;font-size:.55rem;color:var(--fire-glow);margin-bottom:4px}
.ld-next-preview .lnp-name{font-family:'Chakra Petch',sans-serif;font-size:.65rem;margin-bottom:4px}
.ld-next-preview .lnp-stats{font-size:.48rem;color:var(--parch-dk);line-height:1.7}
.ld-reward{
  display:inline-block;margin:6px auto;padding:6px 14px;
  background:rgba(204,102,255,0.12);border:1px solid #cc66ff;border-radius:4px;
  font-size:.5rem;color:#cc66ff;
}
.dg-inv-item{display:flex;align-items:center;gap:5px;padding:4px 5px;margin-bottom:2px;background:rgba(0,0,0,0.2);border:1px solid rgba(255,255,255,0.05);font-size:.48rem;color:var(--parch)}
.dg-inv-item .dg-inv-icon{font-size:.95rem}
.dg-log{font-size:.6rem;color:var(--parch-dk);line-height:1.6;max-height:140px;overflow-y:auto;scrollbar-width:thin;scrollbar-color:#2a4a2a transparent;padding:4px}
.dg-log .dg-log-entry{margin-bottom:2px}
.dg-log .dg-log-good{color:#44ee88}.dg-log .dg-log-bad{color:#ff6644}.dg-log .dg-log-loot{color:var(--gold-bright)}.dg-log .dg-log-info{color:#88aacc}

/* Follower collection display */
.follower-collection{display:flex;gap:6px;flex-wrap:wrap;justify-content:center;margin:6px 0}
.follower-card{
  width:140px;padding:8px 6px;background:var(--panel);border:2px solid var(--panel-border);
  text-align:center;cursor:pointer;transition:all .15s;position:relative;
}
.follower-card:hover{border-color:var(--gold);transform:translateY(-1px)}
.follower-card.selected{border-color:var(--gold-bright);box-shadow:0 0 12px rgba(200,168,50,0.3)}
.follower-card .fc-icon{font-size:1.4rem;margin-bottom:3px}
.follower-card .fc-name{font-family:'Chakra Petch',sans-serif;font-size:.48rem;margin-bottom:2px}
.follower-card .fc-stats{font-size:.45rem;color:var(--parch-dk);line-height:1.5}
.follower-card .fc-rarity{font-size:.42rem;text-transform:uppercase;letter-spacing:1px}
.fc-rarity.common{color:#aaa}.fc-rarity.uncommon{color:#44ee44}.fc-rarity.rare{color:#66aaff}.fc-rarity.epic{color:#cc66ff}.fc-rarity.legendary{color:#ffcc22}
.fc-name.common{color:#ccc}.fc-name.uncommon{color:#44ee44}.fc-name.rare{color:#66aaff}.fc-name.epic{color:#cc66ff}.fc-name.legendary{color:#ffcc22}
.staked-badge{position:absolute;top:-4px;right:-4px;font-size:.42rem;font-family:'Chakra Petch',sans-serif;background:#aa2200;color:#fff;padding:2px 4px;border:1px solid #cc4400}

/* Tooltip / Character Sheet */
.tooltip-wrap{position:relative;display:inline-block}
.char-tooltip{
  display:none;position:absolute;z-index:200;bottom:100%;left:50%;transform:translateX(-50%);
  width:260px;padding:10px 12px;margin-bottom:8px;
  background:rgba(30,22,12,0.97);border:2px solid var(--gold);border-radius:6px;
  box-shadow:0 4px 20px rgba(0,0,0,0.6),0 0 12px rgba(200,168,50,0.15);
  pointer-events:none;font-family:'Nunito',sans-serif;
}
.class-card:hover .char-tooltip{display:block}
.ct-header{font-family:'Chakra Petch',sans-serif;font-size:.7rem;font-weight:700;margin-bottom:4px;display:flex;align-items:center;gap:6px}
.ct-divider{height:1px;background:var(--panel-border);margin:5px 0}
.ct-section{font-family:'Chakra Petch',sans-serif;font-size:.5rem;color:var(--gold);margin:4px 0 2px;font-weight:700}
.ct-row{display:flex;justify-content:space-between;font-size:.52rem;color:var(--parch);padding:1px 0}
.ct-row span:first-child{color:var(--parch-dk)}
.ct-row .ct-val{color:#eeeecc;font-weight:700}
.ct-skill{font-size:.48rem;color:#88ccaa;padding:2px 0;line-height:1.4}
.ct-skill b{color:var(--gold-bright);font-weight:700}
.ct-flavor{font-size:.45rem;color:var(--parch-dk);font-style:italic;margin-top:3px;line-height:1.4}

/* Dungeon damage estimates */
.dg-dmg-est{
  display:flex;gap:12px;justify-content:center;margin:6px 0;font-size:.62rem;
}
.dg-dmg-est .est-you{color:#44ee88}.dg-dmg-est .est-them{color:#ff6644}
.dg-dmg-est span{padding:3px 8px;background:rgba(0,0,0,0.3);border-radius:3px}

/* Selector dungeon button + follower stakes */
.mode-tabs{display:flex;gap:6px;justify-content:center;margin-bottom:8px}
.mode-tab{
  font-family:'Chakra Petch',sans-serif;font-size:.55rem;padding:8px 18px;
  background:linear-gradient(180deg,#1a1a1a,#0a0a0a);border:2px solid var(--panel-border);
  color:var(--parch-dk);cursor:pointer;transition:all .15s;
}
.mode-tab:hover{border-color:var(--gold)}
.mode-tab.active{border-color:var(--gold-bright);color:var(--gold-bright);background:linear-gradient(180deg,#3a3a1a,#2a2a0a)}
.stake-section{background:var(--panel);border:2px solid var(--panel-border);padding:10px;margin:8px auto;max-width:600px;text-align:center}
.stake-section .sel-title{font-size:.55rem;margin-bottom:6px}
.no-followers{font-size:.52rem;color:var(--parch-dk);padding:10px}

