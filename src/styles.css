*{margin:0;padding:0;box-sizing:border-box;image-rendering:pixelated}
:root{
  /* Core: deep dark backgrounds with neon accents */
  --bg-deep: #0a0a1a;
  --bg-panel: rgba(10, 10, 30, 0.92);
  --bg-card: rgba(20, 15, 40, 0.85);
  --border: #2a2a4a;
  --border-glow: #4a4a8a;

  /* Text */
  --text: #e0e0ff;
  --text-dim: #8888aa;
  --text-bright: #ffffff;

  /* Neon accents */
  --teal: #00ffcc;  --teal-glow: #00ffcc;
  --fire: #ff4400;  --fire-glow: #ff6622;
  --ice: #00ccff;   --ice-glow: #44ddff;
  --gold: #ffcc00;  --gold-bright: #ffee44;
  --blood: #ff2200; --heal: #00ff88; --poison: #88ff00;
  --shadow: #8844ff; --shadow-glow: #aa66ff;
  --pink: #ff44cc;  --pink-glow: #ff88dd;

  /* Panel styling */
  --panel: rgba(10, 10, 30, 0.92);
  --panel-border: #2a2a5a;

  /* Legacy aliases */
  --parch: #e0e0ff;  --parch2: #c0c0dd;  --parch-dk: #8888aa;
  --ink: #e0e0ff;
  --lava: #ff3300;  --frost: #88eeff;
}
body{background:#0a0a1a;color:var(--text);font-family:'Nunito',sans-serif;min-height:100vh;overflow-x:hidden;-webkit-font-smoothing:antialiased;font-weight:600}
.bg{position:fixed;inset:0;z-index:0;background:
  repeating-linear-gradient(0deg,transparent,transparent 3px,rgba(100,100,255,0.015) 3px,rgba(100,100,255,0.015) 4px),
  radial-gradient(ellipse at 50% 30%,#12122a 0%,#0a0a1a 70%);
}
.app{position:relative;z-index:1;max-width:1300px;margin:0 auto;padding:10px;text-align:center}
.title{
  font-family:'Chakra Petch',sans-serif;text-align:center;font-size:1.6rem;
  color:var(--gold-bright);text-shadow:2px 2px 0 #4a3a10,0 0 30px rgba(255,204,0,0.4),0 0 60px rgba(255,204,0,0.15);
  letter-spacing:2px;margin-bottom:2px;
  animation:titleGlow 3s ease-in-out infinite alternate;
}
@keyframes titleGlow{0%{text-shadow:2px 2px 0 #4a3a10,0 0 15px rgba(255,204,0,0.2),0 0 40px rgba(255,204,0,0.1)}100%{text-shadow:2px 2px 0 #4a3a10,0 0 35px rgba(255,204,0,0.5),0 0 70px rgba(255,204,0,0.2)}}
.sub{text-align:center;font-size:.65rem;letter-spacing:4px;color:var(--text-dim);margin-bottom:10px;text-transform:uppercase}

/* ===== SELECTOR ===== */
#selectorScreen{display:none;flex-direction:column;align-items:center;gap:10px;padding:10px 0}
.sel-title{font-family:'Chakra Petch',sans-serif;font-size:.8rem;color:var(--gold);letter-spacing:1px;text-shadow:0 0 10px rgba(255,204,0,0.2)}
.sel-row{display:flex;gap:12px;align-items:center;flex-wrap:wrap;justify-content:center}
.class-card{
  width:155px;padding:14px 10px;border-radius:4px;
  border:3px solid var(--border);background:var(--bg-card);cursor:pointer;
  transition:all .2s;text-align:center;position:relative;
  box-shadow:inset 0 0 30px rgba(0,0,0,0.3),0 2px 8px rgba(0,0,0,0.4);
}
.class-card:hover{border-color:var(--gold);transform:translateY(-2px);box-shadow:inset 0 0 30px rgba(0,0,0,0.3),0 0 15px rgba(255,204,0,0.2),0 2px 8px rgba(0,0,0,0.4)}
.class-card.selected{border-color:var(--gold-bright);box-shadow:inset 0 0 30px rgba(0,0,0,0.2),0 0 20px rgba(255,204,0,0.3)}
.class-card::before{content:'';position:absolute;top:0;left:0;right:0;height:3px}
.class-card.wiz::before{background:var(--teal)}.class-card.rgr::before{background:var(--fire)}.class-card.asn::before{background:var(--ice)}
.class-card.bar::before{background:#ff4444}
.cc-icon{font-size:2.2rem;margin-bottom:6px;filter:drop-shadow(0 2px 4px rgba(0,0,0,0.5))}
.cc-name{font-family:'Chakra Petch',sans-serif;font-size:.65rem;font-weight:700;margin-bottom:4px;line-height:1.4}
.cc-name.wiz{color:var(--teal-glow)}.cc-name.rgr{color:var(--fire-glow)}.cc-name.asn{color:var(--ice-glow)}.cc-name.bar{color:#ff6666}
.cc-stats{font-size:.8rem;color:var(--text);line-height:1.7;opacity:.8}
.go-btn{
  font-family:'Chakra Petch',sans-serif;font-size:.75rem;letter-spacing:2px;
  padding:12px 32px;border-radius:4px;
  border:3px solid var(--gold);color:var(--text);
  background:linear-gradient(180deg,#2a1a40 0%,#1a0a2a 100%);
  cursor:pointer;transition:all .2s;
  box-shadow:0 2px 8px rgba(0,0,0,0.5),0 0 10px rgba(255,204,0,0.1);
  text-shadow:0 0 8px rgba(255,204,0,0.3);margin-top:8px;
}
.go-btn:hover{background:linear-gradient(180deg,#3a2a50 0%,#2a1a3a 100%);box-shadow:0 2px 8px rgba(0,0,0,0.5),0 0 20px rgba(255,204,0,0.3)}

/* ===== BATTLE ===== */
#battleScreen{display:none}
#arenaCanvas{display:block;width:100%;border-radius:4px;border:3px solid var(--border-glow);box-shadow:0 0 20px rgba(74,74,138,0.2),0 4px 12px rgba(0,0,0,0.4)}
.hud{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:6px}
.hud-panel{
  background:var(--panel);border-radius:4px;padding:10px;
  border:2px solid var(--panel-border);
  box-shadow:inset 0 0 20px rgba(0,0,0,0.2),0 2px 8px rgba(0,0,0,0.3);
  position:relative;overflow:hidden;
}
.hud-panel::before{content:'';position:absolute;top:0;left:0;right:0;height:2px}
.hud-panel.p1::before{background:linear-gradient(90deg,var(--teal-glow),transparent)}
.hud-panel.p2::before{background:linear-gradient(-90deg,var(--fire-glow),transparent)}
.hud-name{font-family:'Chakra Petch',sans-serif;font-size:.65rem;margin-bottom:5px;line-height:1.4}
.bar{margin-bottom:3px}.bar-label{display:flex;justify-content:space-between;font-size:.58rem;color:var(--text-dim);margin-bottom:1px}
.bar-track{height:10px;background:rgba(0,0,0,0.4);border:1px solid rgba(255,255,255,0.08);overflow:hidden}
.bar-fill{height:100%;transition:width .2s}
.bar-fill.hp-w{background:linear-gradient(90deg,#006a5a,var(--teal-glow))}.bar-fill.hp-r{background:linear-gradient(90deg,#8a2200,var(--fire-glow))}
.bar-fill.hp-a{background:linear-gradient(90deg,#005588,var(--ice-glow))}
.bar-fill.hp-b{background:linear-gradient(90deg,#6a1a1a,#ff6666)}.bar-fill.mana-bar{background:linear-gradient(90deg,#1a3a6a,#4488ff)}
.bar-fill.charge-bar{background:linear-gradient(90deg,#006a5a,var(--teal-glow))}
.bar-fill.energy-bar{background:linear-gradient(90deg,#5a4a10,var(--gold-bright))}
.bar-fill.combo-bar{background:linear-gradient(90deg,#3a2a6a,var(--shadow-glow))}
.bar-fill.bleed-bar{background:linear-gradient(90deg,#6a1a00,var(--blood))}
.buffs{display:flex;gap:2px;flex-wrap:wrap;min-height:16px;margin:3px 0}
.buff{
  padding:1px 4px;font-family:'Nunito',sans-serif;font-size:.55rem;font-weight:700;
  border:1px solid;animation:bp .2s;text-shadow:0 1px 0 rgba(0,0,0,0.5);
}
@keyframes bp{0%{transform:scale(0)}100%{transform:scale(1)}}
.buff.bleed-b{background:rgba(255,34,0,0.3);color:#ff6644;border-color:#662200}
.buff.bloodlust-b{background:rgba(255,0,0,0.2);color:#ff8866;border-color:#660000}
.buff.mark-b{background:rgba(255,204,0,0.2);color:var(--gold-bright);border-color:#6a5a20}
.buff.ult-b{background:rgba(136,68,255,0.3);color:#bb88ff;border-color:#442266}
.buff.slow-b{background:rgba(80,80,80,0.3);color:#aaa;border-color:#444}
.buff.wolf-b{background:rgba(136,68,255,0.2);color:#cc88ff;border-color:#442266}
.buff.shock-b{background:rgba(0,255,204,0.15);color:var(--teal-glow);border-color:#006a5a}
.buff.shield-b{background:rgba(0,204,255,0.2);color:var(--frost);border-color:#006a8a}
.buff.surge-b{background:rgba(136,68,255,0.2);color:#aa88ff;border-color:#3a2a6a}
.buff.storm-b{background:rgba(0,255,204,0.15);color:var(--teal-glow);border-color:#006a5a}
.buff.stealth-b{background:rgba(40,50,70,0.5);color:#8899bb;border-color:#2a3a5a}
.buff.stun-b{background:rgba(255,204,0,0.3);color:var(--gold-bright);border-color:#6a5a20}
.buff.marked-b{background:rgba(255,100,0,0.2);color:#ffaa44;border-color:#6a3a00}
.buff.combo-b{background:rgba(136,68,255,0.2);color:var(--shadow-glow);border-color:#3a2a5a}
.buff.poison-b{background:rgba(136,255,0,0.15);color:#88ff44;border-color:#2a5a0a}
.stat-row{display:flex;justify-content:space-between;font-size:.55rem;color:var(--text-dim);padding:1px 0}
.stat-val{color:var(--text);font-weight:700}
.spells-row{display:flex;gap:2px;flex-wrap:wrap;margin-top:3px}
.spell-chip{
  padding:2px 4px;font-size:.55rem;
  background:rgba(0,0,0,0.3);border:1px solid rgba(255,255,255,0.06);
  color:var(--text-dim);transition:all .15s;
}
.spell-chip.ready{border-color:var(--gold);color:var(--gold-bright);background:rgba(255,204,0,0.08)}
.spell-chip.active-s{border-color:#aa66ff;color:#cc88ff;background:rgba(136,68,255,0.12)}
.spell-chip.used-s{opacity:.25}
.spell-cd{font-size:.52rem;color:var(--text-dim)}

.log-wrap{background:var(--panel);border-radius:4px;padding:8px;border:2px solid var(--panel-border);box-shadow:inset 0 0 20px rgba(0,0,0,0.2),0 2px 8px rgba(0,0,0,0.3);margin-bottom:6px}
.log-title{font-family:'Chakra Petch',sans-serif;font-size:.8rem;color:var(--gold);letter-spacing:1px;margin-bottom:4px;text-shadow:0 0 8px rgba(255,204,0,0.2)}
.log-scroll{height:100px;overflow-y:auto;font-size:.58rem;line-height:1.5;scrollbar-width:thin;scrollbar-color:#2a2a5a transparent}
.log-scroll::-webkit-scrollbar{width:3px}.log-scroll::-webkit-scrollbar-thumb{background:#2a2a5a;border-radius:2px}
.lt{color:var(--text-dim);margin-right:3px}.l-dmg{color:#ff6644}.l-heal{color:#00ff88}.l-spell{color:var(--gold)}
.l-bleed{color:#ff3300}.l-miss{color:#6666aa;font-style:italic}.l-death{color:#ff2200;font-weight:700}
.l-ult{color:#cc88ff;font-weight:700}.l-summon{color:#aa77dd}.l-shock{color:var(--teal-glow)}.l-stealth{color:#7788bb}.l-poison{color:#88ff44}.l-stun{color:var(--gold-bright)}

.ctrls{display:flex;gap:5px;justify-content:center;margin-bottom:6px;flex-wrap:wrap}
.btn{
  font-family:'Chakra Petch',sans-serif;font-size:.8rem;
  padding:8px 16px;cursor:pointer;transition:all .2s;
  border:2px solid;box-shadow:0 2px 6px rgba(0,0,0,0.4);
}
.btn:active{transform:translate(1px,1px);box-shadow:0 1px 3px rgba(0,0,0,0.4)}
.btn-go{color:var(--text);background:linear-gradient(180deg,#2a1a40,#1a0a2a);border-color:var(--gold)}
.btn-go:disabled{opacity:.4;cursor:default}
.btn-rst{color:var(--text-dim);background:linear-gradient(180deg,#1a1a2a,#0a0a15);border-color:var(--panel-border)}
.btn-spd{color:var(--text-dim);background:linear-gradient(180deg,#1a1a2a,#0a0a15);border-color:var(--panel-border);padding:8px 10px;font-size:.55rem}
.btn-spd.on{background:linear-gradient(180deg,#2a2a4a,#1a1a3a);border-color:var(--gold);color:var(--gold)}
.btn-back{color:var(--text-dim);background:linear-gradient(180deg,#1a1a2a,#0a0a15);border-color:var(--panel-border);font-size:.55rem;padding:8px 12px}
.win-banner{
  display:none;text-align:center;padding:12px;margin-bottom:6px;
  font-family:'Chakra Petch',sans-serif;font-size:1.1rem;
  border:3px solid;box-shadow:0 2px 8px rgba(0,0,0,0.4);
}
.win-banner.show{display:block;animation:winP 2s infinite}
@keyframes winP{0%,100%{box-shadow:0 2px 8px rgba(0,0,0,0.4),0 0 10px rgba(255,204,0,0.1)}50%{box-shadow:0 2px 8px rgba(0,0,0,0.4),0 0 30px rgba(255,204,0,0.4)}}
/* ===== MOBILE RESPONSIVE ===== */
@media(max-width:768px){
  .hud{grid-template-columns:1fr}
  .sel-row{flex-direction:column;align-items:center}
  .title{font-size:.9rem}
  .class-card{width:120px;padding:10px 6px}
  .cc-icon{font-size:1.6rem}
  .cc-name{font-size:.55rem}
  .cc-stats{font-size:.65rem}
  .cs-layout{grid-template-columns:1fr;max-width:400px}
  #arenaCanvas{width:100%;height:auto}
  .ctrls{flex-wrap:wrap;gap:3px}
  .btn{padding:6px 10px;font-size:.65rem}
  .btn-spd{padding:6px 8px;font-size:.5rem}
  .go-btn{font-size:.75rem;padding:10px 24px}
  .stake-section{max-width:100%;padding:8px}
  .follower-card{width:110px;padding:6px 4px}
  .log-scroll{height:70px}
  .dg-main{grid-template-columns:1fr;max-width:400px}
  .ld-next-preview{max-width:100%}
}
@media(max-width:480px){
  .title{font-size:.75rem;letter-spacing:1px}
  .sub{font-size:.5rem;letter-spacing:2px}
  .class-card{width:100px;padding:8px 4px}
  .cc-icon{font-size:1.3rem;margin-bottom:3px}
  .cc-name{font-size:.48rem}
  .cc-stats{font-size:.55rem}
  .go-btn{font-size:.62rem;padding:8px 16px}
  .btn{padding:5px 8px;font-size:.55rem}
  .btn-spd{padding:5px 6px;font-size:.45rem}
  .mode-tab{font-size:.45rem;padding:6px 10px}
  .follower-card{width:90px;padding:5px 3px}
  .follower-card .fc-icon{font-size:1rem}
  .follower-card .fc-name{font-size:.42rem}
  .follower-card .fc-stats{font-size:.38rem}
  .dg-choice{font-size:.52rem;padding:8px 12px;min-width:80px}
  .hud-name{font-size:.55rem}
  .cs-header{font-size:.75rem}
}

/* CUSTOM CHARACTER SHEET */
#customScreen{display:none;flex-direction:column;align-items:center;gap:10px;padding:10px 0}
.cs-header{font-family:'Chakra Petch',sans-serif;font-size:.95rem;color:var(--pink-glow);text-shadow:2px 2px 0 #3a0a3a,0 0 20px rgba(255,68,204,0.3);letter-spacing:2px}
.cs-layout{display:grid;grid-template-columns:1fr 180px 1fr;gap:10px;width:100%;max-width:880px}
.cs-panel{background:var(--panel);border:2px solid var(--panel-border);border-radius:4px;padding:10px;box-shadow:inset 0 0 20px rgba(0,0,0,0.2),0 2px 8px rgba(0,0,0,0.3)}
.cs-panel-title{font-family:'Chakra Petch',sans-serif;font-size:.55rem;color:var(--gold);letter-spacing:1px;margin-bottom:6px;text-align:center;border-bottom:1px solid var(--panel-border);padding-bottom:3px}
.cs-avatar{width:160px;height:180px;background:rgba(0,0,0,0.3);border:2px solid var(--panel-border);display:flex;align-items:center;justify-content:center}
.cs-name-input{width:100%;font-family:'Chakra Petch',sans-serif;font-size:.55rem;background:rgba(0,0,0,0.4);border:2px solid var(--panel-border);color:var(--pink-glow);padding:5px 6px;text-align:center;outline:none}
.cs-name-input:focus{border-color:var(--pink)}
.eq-slot{display:flex;align-items:center;gap:5px;padding:5px 6px;margin-bottom:3px;background:rgba(0,0,0,0.2);border:1px solid rgba(255,255,255,0.05);cursor:pointer;transition:all .15s}
.eq-slot:hover{background:rgba(255,68,204,0.08);border-color:var(--pink)}
.eq-slot-icon{font-size:.9rem;width:20px;text-align:center}.eq-slot-label{font-size:.52rem;color:var(--text-dim);min-width:42px}.eq-slot-name{font-size:.52rem;color:var(--pink-glow);flex:1}.eq-slot-stats{font-size:.48rem;color:var(--text);opacity:.7}
.stat-edit-row{display:flex;align-items:center;justify-content:space-between;padding:2px 0;border-bottom:1px solid rgba(255,255,255,0.03)}
.stat-edit-label{font-size:.52rem;color:var(--text-dim);min-width:55px}
.stat-edit-val{width:58px;font-family:'Chakra Petch',sans-serif;font-size:.52rem;background:rgba(0,0,0,0.4);border:1px solid var(--panel-border);color:var(--gold-bright);padding:2px 4px;text-align:right;outline:none}
.stat-edit-val:focus{border-color:var(--pink)}
select.stat-edit-val{width:75px;font-size:.48rem;color:var(--gold-bright);background:rgba(0,0,0,0.4);border:1px solid var(--panel-border)}
.skill-pick{display:flex;align-items:center;gap:5px;padding:6px;margin-bottom:4px;background:rgba(0,0,0,0.2);border:2px solid rgba(255,255,255,0.05);cursor:pointer;transition:all .15s}
.skill-pick:hover{background:rgba(255,68,204,0.08);border-color:var(--pink)}
.skill-pick.active{border-color:var(--pink-glow);background:rgba(255,68,204,0.1)}
.skill-icon{font-size:.95rem}.skill-info{flex:1}.skill-name{font-family:'Chakra Petch',sans-serif;font-size:.5rem;color:var(--text);line-height:1.5}.skill-desc{font-size:.48rem;color:var(--text-dim)}.skill-source{font-size:.45rem;color:var(--pink)}
.dropdown-overlay{display:none;position:fixed;inset:0;z-index:100;background:rgba(0,0,0,0.7);align-items:center;justify-content:center}
.dropdown-overlay.show{display:flex}
.dropdown-panel{background:#0a0a1a;border:3px solid var(--pink);max-width:460px;width:90%;max-height:80vh;overflow-y:auto;padding:14px;box-shadow:0 0 30px rgba(255,68,204,0.2);scrollbar-width:thin;scrollbar-color:#2a2a5a transparent}
.dd-title{font-family:'Chakra Petch',sans-serif;font-size:.8rem;color:var(--pink-glow);text-align:center;margin-bottom:8px}
.dd-item{display:flex;align-items:center;gap:6px;padding:6px;margin-bottom:3px;background:var(--panel);border:2px solid var(--panel-border);cursor:pointer;transition:all .15s}
.dd-item:hover{border-color:var(--pink);background:rgba(255,68,204,0.06)}
.dd-item-icon{font-size:1rem;width:26px;text-align:center}.dd-item-info{flex:1}.dd-item-name{font-size:.37rem;color:var(--text);font-weight:700}.dd-item-stats{font-size:.48rem;color:var(--text-dim);line-height:1.4}
.dd-close{font-family:'Chakra Petch',sans-serif;font-size:.37rem;padding:6px 14px;border:2px solid var(--panel-border);background:var(--panel);color:var(--text-dim);cursor:pointer;display:block;margin:8px auto 0}
.dd-close:hover{border-color:var(--gold);color:var(--gold)}
.class-card.cst::before{background:var(--pink)}
.cc-name.cst{color:var(--pink-glow)}
.bar-fill.hp-c{background:linear-gradient(90deg,#6a1a6a,var(--pink-glow))}
.bar-fill.res-bar{background:linear-gradient(90deg,#4a1a5a,var(--pink-glow))}

/* ===== LADDER MODE ===== */
#ladderScreen{display:none;flex-direction:column;align-items:center;gap:10px;padding:10px 0}
#ladderScreen>*{width:100%}
#ladderPickScreen{display:flex;flex-direction:column;align-items:center;gap:10px}

/* ===== DUNGEON MODE ===== */
#dungeonScreen{display:none;flex-direction:column;align-items:center;gap:10px;padding:10px 0}
#dungeonScreen>*{width:100%}
#dungeonPickScreen{display:flex;flex-direction:column;align-items:center;gap:10px}
.dg-header{font-family:'Chakra Petch',sans-serif;font-size:.95rem;color:#00ff88;text-shadow:2px 2px 0 #0a2a1a,0 0 20px rgba(0,255,136,0.3);letter-spacing:2px}
#selectorScreen .dg-header{color:var(--gold-bright);text-shadow:2px 2px 0 #3a2a0a,0 0 20px rgba(255,204,0,0.3)}
#ladderScreen .dg-header{color:#ff8844;text-shadow:2px 2px 0 #2a1a0a,0 0 20px rgba(255,136,68,0.3)}
.dg-sub{font-size:.65rem;color:var(--text-dim);letter-spacing:2px;text-align:center}
.dg-main{display:grid;grid-template-columns:220px 1fr 220px;gap:10px;width:100%;max-width:950px;margin:0 auto}
@media(max-width:700px){.dg-main{grid-template-columns:1fr;max-width:400px}}
.dg-panel{background:var(--panel);border:2px solid var(--panel-border);border-radius:4px;padding:10px;box-shadow:inset 0 0 20px rgba(0,0,0,0.2),0 2px 8px rgba(0,0,0,0.3)}
.dg-panel-title{font-family:'Chakra Petch',sans-serif;font-size:.55rem;color:var(--gold);letter-spacing:1px;margin-bottom:6px;text-align:center;border-bottom:1px solid var(--panel-border);padding-bottom:3px}
.dg-map{position:relative;min-height:400px;display:flex;flex-direction:column;align-items:center;overflow:hidden}
.dg-map canvas{border:2px solid var(--panel-border);background:#050510}
.dg-room{position:relative;display:flex;flex-direction:column;align-items:center;gap:6px;padding:10px}
.dg-room-title{font-family:'Chakra Petch',sans-serif;font-size:.95rem;color:#00ff88;text-shadow:0 0 10px rgba(0,255,136,0.3)}
.dg-room-desc{font-size:.65rem;color:var(--text);text-align:center;line-height:1.6;max-width:440px}
.dg-room-icon{font-size:2.5rem;filter:drop-shadow(0 3px 6px rgba(0,0,0,0.6));margin:4px 0}
.dg-choices{display:flex;gap:8px;flex-wrap:wrap;justify-content:center;margin-top:4px}
.dg-choice{
  font-family:'Chakra Petch',sans-serif;font-size:.62rem;padding:12px 20px;
  background:linear-gradient(180deg,#0a2a1a,#051a0a);border:2px solid #1a5a2a;
  color:#00ff88;cursor:pointer;transition:all .2s;min-width:110px;text-align:center;
  box-shadow:0 2px 6px rgba(0,0,0,0.4);line-height:1.6;
}
.dg-choice:hover{border-color:#00ff88;box-shadow:0 2px 6px rgba(0,0,0,0.4),0 0 12px rgba(0,255,136,0.2);transform:translateY(-1px)}
.dg-choice.danger{background:linear-gradient(180deg,#2a0a0a,#1a0505);border-color:#5a2a2a;color:#ff6644}
.dg-choice.danger:hover{border-color:#ff6644;box-shadow:0 2px 6px rgba(0,0,0,0.4),0 0 12px rgba(255,68,68,0.2)}
.dg-choice.gold-c{background:linear-gradient(180deg,#2a2a0a,#1a1a05);border-color:#5a5a2a;color:var(--gold-bright)}
.dg-choice.gold-c:hover{border-color:var(--gold-bright);box-shadow:0 2px 6px rgba(0,0,0,0.4),0 0 12px rgba(255,204,0,0.2)}
.dg-choice:disabled{opacity:.4;cursor:default;transform:none}
.dg-hero-info{font-size:.52rem;color:var(--text);line-height:1.7}
.dg-hero-info b{color:#00ff88}
.dg-hero-bar{margin:3px 0}
.dg-hero-bar .bar-track{height:8px}
.dg-loot-card{
  padding:8px;margin:4px 0;background:rgba(0,0,0,0.3);border:2px solid;
  display:flex;align-items:center;gap:8px;transition:all .15s;cursor:pointer;
}
.dg-loot-card:hover{transform:translateY(-1px)}
.dg-loot-card.common{border-color:#6a6a6a}.dg-loot-card.uncommon{border-color:#44ee44}.dg-loot-card.rare{border-color:#4488ff}.dg-loot-card.epic{border-color:#cc44ff}.dg-loot-card.legendary{border-color:#ffaa22}
.dg-loot-icon{font-size:1.6rem}.dg-loot-info{flex:1}.dg-loot-name{font-family:'Chakra Petch',sans-serif;font-size:.5rem}.dg-loot-desc{font-size:.48rem;color:var(--text-dim);margin-top:2px}
.dg-loot-name.common{color:#aaa}.dg-loot-name.uncommon{color:#44ff44}.dg-loot-name.rare{color:#66aaff}.dg-loot-name.epic{color:#cc66ff}.dg-loot-name.legendary{color:#ffcc22}
.dg-floor-num{font-family:'Chakra Petch',sans-serif;font-size:.65rem;color:#00ff88;text-align:center;margin-bottom:4px}

/* Room map markers */
.rm-dot{width:18px;height:18px;border-radius:3px;font-size:.55rem;line-height:18px;text-align:center;border:1px solid rgba(255,255,255,0.1);background:rgba(0,0,0,0.3);color:var(--text-dim);transition:all .2s}
.rm-dot.current{border-color:var(--gold-bright);box-shadow:0 0 8px rgba(255,204,0,0.4);color:var(--gold-bright)}
.rm-dot.cleared{background:rgba(0,255,136,0.15);border-color:#00ff88;color:#00ff88}
.rm-dot.boss{border-color:#ff4444}
.rm-dot.boss.cleared{background:rgba(255,68,68,0.15);color:#ff4444}
.rm-dot.floor-sep{width:2px;background:var(--panel-border);border:none;height:18px;border-radius:0}

/* Intermission screen */
.dg-intermission{text-align:center;padding:12px 8px}
.dg-im-title{font-family:'Chakra Petch',sans-serif;font-size:.85rem;margin-bottom:6px}
.dg-im-summary{font-size:.6rem;color:var(--text);line-height:1.8;margin-bottom:8px}
.dg-im-stat{display:inline-block;padding:3px 10px;margin:2px;background:rgba(0,0,0,0.3);border-radius:3px;font-size:.55rem}
.dg-im-follower{
  margin:8px auto;padding:12px;max-width:280px;text-align:center;
  background:rgba(0,0,0,0.4);border-radius:6px;
}
.dg-im-follower .fim-icon{font-size:2.2rem;margin-bottom:4px}
.dg-im-follower .fim-name{font-family:'Chakra Petch',sans-serif;font-size:.65rem;margin-bottom:2px}
.dg-im-follower .fim-rarity{font-size:.48rem;text-transform:uppercase;letter-spacing:2px;margin-bottom:4px}
.dg-im-follower .fim-ability{font-size:.48rem;color:#88ffcc;margin:4px 0;line-height:1.5}
.dg-im-follower .fim-buff{font-size:.48rem;color:var(--gold-bright);margin:2px 0}
.dg-im-follower .fim-wager{font-size:.45rem;color:#ff8866;margin:2px 0}
.dg-im-follower.common{border:2px solid #aaa}.dg-im-follower.uncommon{border:2px solid #44ff44}
.dg-im-follower.rare{border:2px solid #66aaff;box-shadow:0 0 10px rgba(102,170,255,0.2)}
.dg-im-follower.epic{border:2px solid #cc66ff;box-shadow:0 0 15px rgba(204,102,255,0.3)}
.dg-im-follower.legendary{border:2px solid #ffcc22;box-shadow:0 0 20px rgba(255,204,34,0.4);animation:ldglow 1.5s ease-in-out infinite}
@keyframes ldglow{0%,100%{box-shadow:0 0 15px rgba(255,204,34,0.3)}50%{box-shadow:0 0 30px rgba(255,204,34,0.6)}}

/* Ladder intermission */
.ld-inter{text-align:center;padding:12px 0;display:flex;flex-direction:column;align-items:center;gap:8px}
.ld-inter .ld-title{font-family:'Chakra Petch',sans-serif;font-size:.75rem;margin-bottom:8px}
.ld-inter .ld-bracket{display:flex;flex-wrap:wrap;gap:4px;justify-content:center;margin:8px 0}
.ld-inter .ld-opp{
  display:inline-flex;align-items:center;gap:4px;padding:4px 8px;
  background:rgba(0,0,0,0.3);border:1px solid rgba(255,255,255,0.1);font-size:.48rem;
  color:var(--text-dim);border-radius:3px;
}
.ld-opp.won{border-color:#00ff88;color:#00ff88}
.ld-opp.lost{border-color:#ff4444;color:#ff4444}
.ld-opp.current{border-color:var(--gold-bright);color:var(--gold-bright);background:rgba(255,204,0,0.1)}
.ld-opp.upcoming{opacity:0.5}
.ld-opp .opp-icon{font-size:.7rem}
.ld-next-preview{
  margin:10px auto;padding:10px;max-width:320px;
  background:rgba(0,0,0,0.35);border:2px solid var(--fire-glow);border-radius:4px;
}
.ld-next-preview .lnp-title{font-family:'Chakra Petch',sans-serif;font-size:.55rem;color:var(--fire-glow);margin-bottom:4px}
.ld-next-preview .lnp-name{font-family:'Chakra Petch',sans-serif;font-size:.65rem;margin-bottom:4px}
.ld-next-preview .lnp-stats{font-size:.48rem;color:var(--text-dim);line-height:1.7}
.ld-reward{
  display:inline-block;margin:6px auto;padding:6px 14px;
  background:rgba(204,102,255,0.12);border:1px solid #cc66ff;border-radius:4px;
  font-size:.5rem;color:#cc66ff;
}
.dg-inv-item{display:flex;align-items:center;gap:5px;padding:4px 5px;margin-bottom:2px;background:rgba(0,0,0,0.2);border:1px solid rgba(255,255,255,0.05);font-size:.48rem;color:var(--text)}
.dg-inv-item .dg-inv-icon{font-size:.95rem}
.dg-log{font-size:.6rem;color:var(--text-dim);line-height:1.6;max-height:140px;overflow-y:auto;scrollbar-width:thin;scrollbar-color:#1a3a2a transparent;padding:4px}
.dg-log .dg-log-entry{margin-bottom:2px}
.dg-log .dg-log-good{color:#00ff88}.dg-log .dg-log-bad{color:#ff6644}.dg-log .dg-log-loot{color:var(--gold-bright)}.dg-log .dg-log-info{color:#88aaff}

/* Follower collection display */
.follower-collection{display:flex;gap:6px;flex-wrap:wrap;justify-content:center;margin:6px 0}
.follower-card{
  width:140px;padding:8px 6px;background:var(--panel);border:2px solid var(--panel-border);
  text-align:center;cursor:pointer;transition:all .2s;position:relative;
}
.follower-card:hover{border-color:var(--gold);transform:translateY(-1px);box-shadow:0 0 10px rgba(255,204,0,0.15)}
.follower-card.selected{border-color:var(--gold-bright);box-shadow:0 0 15px rgba(255,204,0,0.3)}
.follower-card .fc-icon{font-size:1.4rem;margin-bottom:3px}
.follower-card .fc-name{font-family:'Chakra Petch',sans-serif;font-size:.48rem;margin-bottom:2px}
.follower-card .fc-stats{font-size:.45rem;color:var(--text-dim);line-height:1.5}
.follower-card .fc-rarity{font-size:.42rem;text-transform:uppercase;letter-spacing:1px}
.fc-rarity.common{color:#aaa}.fc-rarity.uncommon{color:#44ff44}.fc-rarity.rare{color:#66aaff}.fc-rarity.epic{color:#cc66ff}.fc-rarity.legendary{color:#ffcc22}
.fc-name.common{color:#ccc}.fc-name.uncommon{color:#44ff44}.fc-name.rare{color:#66aaff}.fc-name.epic{color:#cc66ff}.fc-name.legendary{color:#ffcc22}
.staked-badge{position:absolute;top:-4px;right:-4px;font-size:.42rem;font-family:'Chakra Petch',sans-serif;background:#cc2200;color:#fff;padding:2px 4px;border:1px solid #ff4400}

/* Tooltip / Character Sheet */
.tooltip-wrap{position:relative;display:inline-block}
.char-tooltip{
  display:none;position:absolute;z-index:200;bottom:100%;left:50%;transform:translateX(-50%);
  width:260px;padding:10px 12px;margin-bottom:8px;
  background:rgba(10,10,26,0.97);border:2px solid var(--gold);border-radius:6px;
  box-shadow:0 4px 20px rgba(0,0,0,0.6),0 0 12px rgba(255,204,0,0.1);
  pointer-events:none;font-family:'Nunito',sans-serif;
}
.class-card:hover .char-tooltip{display:block}
.ct-header{font-family:'Chakra Petch',sans-serif;font-size:.7rem;font-weight:700;margin-bottom:4px;display:flex;align-items:center;gap:6px}
.ct-divider{height:1px;background:var(--panel-border);margin:5px 0}
.ct-section{font-family:'Chakra Petch',sans-serif;font-size:.5rem;color:var(--gold);margin:4px 0 2px;font-weight:700}
.ct-row{display:flex;justify-content:space-between;font-size:.52rem;color:var(--text);padding:1px 0}
.ct-row span:first-child{color:var(--text-dim)}
.ct-row .ct-val{color:#eeeeff;font-weight:700}
.ct-skill{font-size:.48rem;color:#88ffcc;padding:2px 0;line-height:1.4}
.ct-skill b{color:var(--gold-bright);font-weight:700}
.ct-flavor{font-size:.45rem;color:var(--text-dim);font-style:italic;margin-top:3px;line-height:1.4}

/* Dungeon damage estimates */
.dg-dmg-est{
  display:flex;gap:12px;justify-content:center;margin:6px 0;font-size:.62rem;
}
.dg-dmg-est .est-you{color:#00ff88}.dg-dmg-est .est-them{color:#ff6644}
.dg-dmg-est span{padding:3px 8px;background:rgba(0,0,0,0.3);border-radius:3px}

/* Selector dungeon button + follower stakes */
.mode-tabs{display:flex;gap:6px;justify-content:center;margin:0 auto 8px}
.mode-tab{
  font-family:'Chakra Petch',sans-serif;font-size:.55rem;padding:8px 18px;
  background:linear-gradient(180deg,#1a1a2a,#0a0a15);border:2px solid var(--panel-border);
  color:var(--text-dim);cursor:pointer;transition:all .2s;
}
.mode-tab:hover{border-color:var(--gold);box-shadow:0 0 8px rgba(255,204,0,0.1)}
.mode-tab.active{border-color:var(--gold-bright);color:var(--gold-bright);background:linear-gradient(180deg,#2a2a1a,#1a1a0a);box-shadow:0 0 12px rgba(255,204,0,0.15)}
.mode-tab.reset-tab{color:#aa4444;border-color:#331a1a;font-size:.42rem;padding:6px 10px;opacity:0.5}
.mode-tab.reset-tab:hover{border-color:#ff4444;color:#ff4444;opacity:1;box-shadow:0 0 8px rgba(255,68,68,0.15)}
.stake-section{background:var(--panel);border:2px solid var(--panel-border);padding:10px;margin:8px auto;max-width:600px;text-align:center}
.stake-section .sel-title{font-size:.55rem;margin-bottom:6px}
.no-followers{font-size:.52rem;color:var(--text-dim);padding:10px}

/* ===== NEON GLOW UTILITY ===== */
.neon-glow{box-shadow:0 0 10px currentColor,0 0 20px currentColor}

.hero-preview-canvas{display:block;margin:0 auto 6px;image-rendering:pixelated;border-radius:4px}
.dg-turn-actions{display:flex;gap:6px;justify-content:center;flex-wrap:wrap;padding:8px;background:rgba(5,5,20,0.85);border-top:1px solid var(--panel-border)}
.dg-action-btn{display:flex;flex-direction:column;align-items:center;gap:2px;padding:8px 14px;border:2px solid;border-radius:4px;background:rgba(20,20,40,0.8);cursor:pointer;transition:all 0.15s;font-family:'Chakra Petch',sans-serif;min-width:72px;color:inherit}
.dg-action-btn:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 0 15px currentColor}
.dg-action-btn:disabled{opacity:0.3;cursor:default}
.dga-icon{font-size:1.2rem}
.dga-label{font-size:.42rem}

/* Scrollbar global */
::-webkit-scrollbar{width:4px}::-webkit-scrollbar-track{background:transparent}::-webkit-scrollbar-thumb{background:#2a2a5a;border-radius:2px}
